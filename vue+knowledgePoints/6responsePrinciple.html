
<div id='app'>
    <input id='ai' type="text">
    <h1 id='a'></h1>
    <h2 id='c'></h2>
    <hr>
    <input id='bi' type="text">
    <h1 id='b'></h1>
</div>

<script>

// 第一种定义对象
var a = 1
var obj = {}
obj.a = a
obj.b = '2'

// 第二种定义对象 
var vm = {}
var msg = '1111'
var foo = '2222'
// 劫持
Object.defineProperty(vm, 'msg', {
    get: function() {
        console.log('msg get')
        return msg
    },
    set: function(newVal) {
        console.log('msg set')
        msg = newVal
        // 通知watcher,去更新DOM
        watcher('msg', msg)
    }
})
Object.defineProperty(vm, 'foo', {
    get: function() {
        console.log('foo get')
        return foo
    },
    set: function(newVal) {
        console.log('foo set')
        foo = newVal
        // 通知watcher,去更新DOM
        watcher('foo', foo)
    }
})

// console.log(vm.msg, vm.foo)
// 初始化
document.getElementById('a').innerText = vm.msg
document.getElementById('b').innerText = vm.foo
document.getElementById('c').innerText = vm.msg
document.getElementById('ai').value = vm.msg
document.getElementById('bi').value = vm.foo

// 页面事件绑定
document.getElementById('ai').addEventListener('input', function(e) {
    vm.msg = e.target.value
})
document.getElementById('bi').addEventListener('change', function(e) {
    vm.foo = e.target.value
})

// 监听器：更新DOM
function watcher(key, value) {
    switch(key) {
        case 'msg':
        document.getElementById('a').innerText = value
        document.getElementById('c').innerText = value
        break
        case 'foo':
        document.getElementById('b').innerText = foo
        break
        default:
    }
    
}

</script>

